# =============================================================================
# CreatorBridge Platform - Environment Configuration Template
# =============================================================================
# Copy this file to .env and fill in the values for your environment
# DO NOT commit .env files to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Environment
# -----------------------------------------------------------------------------
NODE_ENV=development
LOG_LEVEL=debug
PORT=8080

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# PostgreSQL connection string
# Format: postgresql://user:password@host:port/database?schema=public
DATABASE_URL="postgresql://postgres:password@localhost:5432/creatorbridge_dev?schema=public"

# Connection pool settings
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_CONNECTION_TIMEOUT=30000

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD=""
REDIS_TLS_ENABLED=false

# Session settings
SESSION_TTL_SECONDS=86400
CACHE_TTL_SECONDS=3600

# -----------------------------------------------------------------------------
# Authentication
# -----------------------------------------------------------------------------
# JWT Configuration
JWT_SECRET="your-super-secret-jwt-key-min-32-chars"
JWT_ACCESS_TOKEN_EXPIRY="15m"
JWT_REFRESH_TOKEN_EXPIRY="7d"
JWT_ISSUER="creatorbridge"

# OAuth Providers (optional)
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""
FACEBOOK_APP_ID=""
FACEBOOK_APP_SECRET=""

# -----------------------------------------------------------------------------
# Azure Services
# -----------------------------------------------------------------------------
# Azure AD / Entra ID (for OIDC authentication)
AZURE_TENANT_ID=""
AZURE_CLIENT_ID=""
AZURE_CLIENT_SECRET=""

# Azure Blob Storage
AZURE_STORAGE_ACCOUNT_NAME=""
AZURE_STORAGE_ACCOUNT_KEY=""
AZURE_STORAGE_CONNECTION_STRING=""
AZURE_STORAGE_CONTAINER_UPLOADS="uploads"
AZURE_STORAGE_CONTAINER_ASSETS="assets"
AZURE_STORAGE_CONTAINER_THUMBNAILS="thumbnails"

# Azure CDN / Front Door
AZURE_CDN_ENDPOINT=""
AZURE_CDN_HOSTNAME=""

# Azure Content Moderator (Cognitive Services)
AZURE_CONTENT_MODERATOR_ENDPOINT=""
AZURE_CONTENT_MODERATOR_KEY=""

# Azure Key Vault
AZURE_KEYVAULT_URL=""

# Azure Service Bus
AZURE_SERVICEBUS_CONNECTION_STRING=""
AZURE_SERVICEBUS_QUEUE_PROCESSING="asset-processing"
AZURE_SERVICEBUS_QUEUE_NOTIFICATIONS="notifications"

# -----------------------------------------------------------------------------
# Stripe Configuration
# -----------------------------------------------------------------------------
STRIPE_SECRET_KEY=""
STRIPE_PUBLISHABLE_KEY=""
STRIPE_WEBHOOK_SECRET=""

# Stripe Connect (for creator payouts)
STRIPE_CONNECT_CLIENT_ID=""
STRIPE_CONNECT_WEBHOOK_SECRET=""

# -----------------------------------------------------------------------------
# Email Configuration (SendGrid)
# -----------------------------------------------------------------------------
SENDGRID_API_KEY=""
SENDGRID_FROM_EMAIL="noreply@creatorbridge.com"
SENDGRID_FROM_NAME="CreatorBridge"

# Email templates
SENDGRID_TEMPLATE_WELCOME=""
SENDGRID_TEMPLATE_PASSWORD_RESET=""
SENDGRID_TEMPLATE_CAMPAIGN_INVITE=""
SENDGRID_TEMPLATE_CONTENT_APPROVED=""
SENDGRID_TEMPLATE_PAYOUT_SENT=""

# -----------------------------------------------------------------------------
# Push Notifications
# -----------------------------------------------------------------------------
FIREBASE_PROJECT_ID=""
FIREBASE_PRIVATE_KEY=""
FIREBASE_CLIENT_EMAIL=""

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL=false

# -----------------------------------------------------------------------------
# File Upload Limits
# -----------------------------------------------------------------------------
MAX_FILE_SIZE_MB=500
MAX_IMAGE_SIZE_MB=50
ALLOWED_VIDEO_TYPES="video/mp4,video/quicktime,video/x-msvideo,video/webm"
ALLOWED_IMAGE_TYPES="image/jpeg,image/png,image/webp,image/gif"

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
FEATURE_MFA_ENABLED=true
FEATURE_OAUTH_ENABLED=true
FEATURE_CONTENT_MODERATION_ENABLED=true
FEATURE_AUTO_PAYOUTS_ENABLED=true
FEATURE_ANALYTICS_ENABLED=true

# -----------------------------------------------------------------------------
# Monitoring & Observability
# -----------------------------------------------------------------------------
# Application Insights
APPLICATIONINSIGHTS_CONNECTION_STRING=""
APPLICATIONINSIGHTS_INSTRUMENTATION_KEY=""

# Sentry (optional)
SENTRY_DSN=""
SENTRY_ENVIRONMENT=""

# Custom metrics
METRICS_ENABLED=true
METRICS_PREFIX="creatorbridge"

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
CORS_ORIGINS="http://localhost:3000,http://localhost:3001"
CORS_METHODS="GET,POST,PUT,PATCH,DELETE,OPTIONS"
CORS_CREDENTIALS=true

# -----------------------------------------------------------------------------
# Service URLs (for inter-service communication)
# -----------------------------------------------------------------------------
AUTH_SERVICE_URL="http://auth-service:8081"
USER_SERVICE_URL="http://user-service:8082"
BILLING_SERVICE_URL="http://billing-service:8083"
NOTIFICATION_SERVICE_URL="http://notification-service:8084"
CAMPAIGN_SERVICE_URL="http://campaign-service:8085"
CREATOR_SERVICE_URL="http://creator-service:8086"
CONTENT_SERVICE_URL="http://content-service:8087"
ASSET_SERVICE_URL="http://asset-service:8088"
RIGHTS_SERVICE_URL="http://rights-service:8089"
ANALYTICS_SERVICE_URL="http://analytics-service:8090"
PAYOUT_SERVICE_URL="http://payout-service:8091"

# -----------------------------------------------------------------------------
# API Gateway
# -----------------------------------------------------------------------------
API_GATEWAY_URL="http://localhost:8080"
API_BASE_PATH="/v1"

# -----------------------------------------------------------------------------
# Testing (only used in test environments)
# -----------------------------------------------------------------------------
TEST_DATABASE_URL="postgresql://postgres:password@localhost:5432/creatorbridge_test?schema=public"
E2E_TEST_USER_EMAIL="test@creatorbridge.com"
E2E_TEST_USER_PASSWORD="TestPassword123!"
