# =============================================================================
# NEXUS Platform - STAGING Environment Configuration
# =============================================================================
# Staging environment mirrors production but uses test data and sandbox APIs
# All secrets should be managed via Azure Key Vault or CI/CD secrets
# =============================================================================

# -----------------------------------------------------------------------------
# APPLICATION SETTINGS
# -----------------------------------------------------------------------------
NODE_ENV=staging
APP_NAME=nexus-platform-staging
APP_URL=https://staging.nexusugc.com
APP_VERSION=${DEPLOY_VERSION}

# -----------------------------------------------------------------------------
# AZURE CONFIGURATION [REQUIRED]
# -----------------------------------------------------------------------------
# Staging uses its own Azure subscription/resource group
AZURE_SUBSCRIPTION_ID=${AZURE_SUBSCRIPTION_ID}
AZURE_TENANT_ID=${AZURE_TENANT_ID}
AZURE_CLIENT_ID=${AZURE_CLIENT_ID}
AZURE_CLIENT_SECRET=${AZURE_CLIENT_SECRET}
AZURE_RESOURCE_GROUP=rg-nexus-staging

# Azure AD B2C (Staging tenant)
AZURE_AD_B2C_TENANT_NAME=${AZURE_AD_B2C_TENANT_NAME}
AZURE_AD_B2C_CLIENT_ID=${AZURE_AD_B2C_CLIENT_ID}
AZURE_AD_B2C_CLIENT_SECRET=${AZURE_AD_B2C_CLIENT_SECRET}
AZURE_AD_B2C_PRIMARY_USER_FLOW=B2C_1_signupsignin_staging

# Azure Key Vault (Secrets management)
AZURE_KEY_VAULT_URL=https://kv-nexus-staging.vault.azure.net/

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION [REQUIRED]
# -----------------------------------------------------------------------------
# Use Azure managed databases for staging

# PostgreSQL - Azure Database for PostgreSQL
DATABASE_URL=${DATABASE_URL}
DATABASE_POOL_MIN=5
DATABASE_POOL_MAX=20
DATABASE_SSL=true

# MongoDB - Azure Cosmos DB (MongoDB API)
MONGODB_URI=${MONGODB_URI}

# Redis - Azure Cache for Redis
REDIS_URL=${REDIS_URL}
REDIS_PASSWORD=${REDIS_PASSWORD}

# -----------------------------------------------------------------------------
# AUTHENTICATION [REQUIRED]
# -----------------------------------------------------------------------------
NEXTAUTH_URL=https://staging.nexusugc.com
NEXTAUTH_SECRET=${NEXTAUTH_SECRET}

# OAuth Providers (Staging apps)
GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}
GITHUB_CLIENT_ID=${GITHUB_CLIENT_ID}
GITHUB_CLIENT_SECRET=${GITHUB_CLIENT_SECRET}

# -----------------------------------------------------------------------------
# SOCIAL MEDIA APIS [REQUIRED]
# -----------------------------------------------------------------------------
# Use sandbox/test apps for social platforms

# TikTok Sandbox
TIKTOK_CLIENT_KEY=${TIKTOK_CLIENT_KEY}
TIKTOK_CLIENT_SECRET=${TIKTOK_CLIENT_SECRET}

# Meta Test App
META_APP_ID=${META_APP_ID}
META_APP_SECRET=${META_APP_SECRET}

# YouTube API (same project, different quota)
YOUTUBE_API_KEY=${YOUTUBE_API_KEY}
YOUTUBE_CLIENT_ID=${YOUTUBE_CLIENT_ID}
YOUTUBE_CLIENT_SECRET=${YOUTUBE_CLIENT_SECRET}

# -----------------------------------------------------------------------------
# AZURE STORAGE [REQUIRED]
# -----------------------------------------------------------------------------
AZURE_STORAGE_ACCOUNT_NAME=${AZURE_STORAGE_ACCOUNT_NAME}
AZURE_STORAGE_ACCOUNT_KEY=${AZURE_STORAGE_ACCOUNT_KEY}
AZURE_STORAGE_CONNECTION_STRING=${AZURE_STORAGE_CONNECTION_STRING}
AZURE_STORAGE_CONTAINER_UPLOADS=uploads-staging
AZURE_STORAGE_CONTAINER_MEDIA=media-staging

# -----------------------------------------------------------------------------
# AI SERVICES [REQUIRED]
# -----------------------------------------------------------------------------
# Azure OpenAI (Staging deployment)
AZURE_OPENAI_ENDPOINT=${AZURE_OPENAI_ENDPOINT}
AZURE_OPENAI_API_KEY=${AZURE_OPENAI_API_KEY}
AZURE_OPENAI_DEPLOYMENT_GPT4=gpt-4-staging
AZURE_OPENAI_DEPLOYMENT_GPT4O=gpt-4o-staging
AZURE_OPENAI_API_VERSION=2024-02-15-preview

# OpenAI Direct (Fallback)
OPENAI_API_KEY=${OPENAI_API_KEY}

# Third-party AI (Use separate staging keys)
REPLICATE_API_TOKEN=${REPLICATE_API_TOKEN}
ELEVENLABS_API_KEY=${ELEVENLABS_API_KEY}

# Azure Cognitive Services
AZURE_COGNITIVE_SERVICES_ENDPOINT=${AZURE_COGNITIVE_SERVICES_ENDPOINT}
AZURE_COGNITIVE_SERVICES_KEY=${AZURE_COGNITIVE_SERVICES_KEY}

# -----------------------------------------------------------------------------
# MESSAGE QUEUE [REQUIRED]
# -----------------------------------------------------------------------------
AZURE_SERVICE_BUS_CONNECTION_STRING=${AZURE_SERVICE_BUS_CONNECTION_STRING}
AZURE_SERVICE_BUS_QUEUE_VIDEOS=video-processing-staging
AZURE_SERVICE_BUS_QUEUE_NOTIFICATIONS=notifications-staging

# Azure Notification Hub
AZURE_NOTIFICATION_HUB_CONNECTION_STRING=${AZURE_NOTIFICATION_HUB_CONNECTION_STRING}
AZURE_NOTIFICATION_HUB_NAME=nexus-notifications-staging

# -----------------------------------------------------------------------------
# COMMUNICATION [REQUIRED]
# -----------------------------------------------------------------------------
# SendGrid (Staging API Key - limited sending)
SENDGRID_API_KEY=${SENDGRID_API_KEY}
SENDGRID_FROM_EMAIL=staging-noreply@nexusugc.com

# Twilio (Test credentials)
TWILIO_ACCOUNT_SID=${TWILIO_ACCOUNT_SID}
TWILIO_AUTH_TOKEN=${TWILIO_AUTH_TOKEN}
TWILIO_PHONE_NUMBER=${TWILIO_PHONE_NUMBER}

# Azure Communication Services
AZURE_COMMUNICATION_SERVICES_CONNECTION_STRING=${AZURE_COMMUNICATION_SERVICES_CONNECTION_STRING}
AZURE_COMMUNICATION_SERVICES_SENDER_EMAIL=staging-noreply@nexusugc.com

# -----------------------------------------------------------------------------
# PAYMENT SERVICES [REQUIRED]
# -----------------------------------------------------------------------------
# Stripe TEST mode keys - Never use live keys in staging
STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY}
STRIPE_PUBLISHABLE_KEY=${STRIPE_PUBLISHABLE_KEY}
STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET}

# Paystack Test Mode
PAYSTACK_SECRET_KEY=${PAYSTACK_SECRET_KEY}
PAYSTACK_PUBLIC_KEY=${PAYSTACK_PUBLIC_KEY}

# -----------------------------------------------------------------------------
# ANALYTICS [RECOMMENDED]
# -----------------------------------------------------------------------------
# Separate staging project for analytics
MIXPANEL_TOKEN=${MIXPANEL_TOKEN}
AMPLITUDE_API_KEY=${AMPLITUDE_API_KEY}

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
# Enable all features for staging testing
FEATURE_AI_VIDEO_GENERATOR=true
FEATURE_SHOPPABLE_COMMERCE=true
FEATURE_CREATOR_MARKETPLACE=true
FEATURE_ADVANCED_ANALYTICS=true

# -----------------------------------------------------------------------------
# RATE LIMITING (Production-like)
# -----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# -----------------------------------------------------------------------------
# LOGGING (Moderate verbosity)
# -----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FORMAT=json

# -----------------------------------------------------------------------------
# DEVELOPMENT SETTINGS (Disabled for Staging)
# -----------------------------------------------------------------------------
HOT_RELOAD=false
SKIP_EMAIL_VERIFICATION=false
MOCK_EXTERNAL_APIS=false

# -----------------------------------------------------------------------------
# MONITORING & OBSERVABILITY
# -----------------------------------------------------------------------------
# Application Insights
APPLICATIONINSIGHTS_CONNECTION_STRING=${APPLICATIONINSIGHTS_CONNECTION_STRING}

# Sentry Error Tracking
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=staging
