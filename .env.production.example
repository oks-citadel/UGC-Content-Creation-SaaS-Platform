# =============================================================================
# NEXUS Platform - PRODUCTION Environment Configuration
# =============================================================================
# CRITICAL: All secrets MUST be stored in Azure Key Vault
# This file serves as a template - actual values are injected at deployment
# NEVER commit production secrets to version control
# =============================================================================

# -----------------------------------------------------------------------------
# APPLICATION SETTINGS [REQUIRED]
# -----------------------------------------------------------------------------
NODE_ENV=production
APP_NAME=nexus-platform
APP_URL=https://nexusugc.com
APP_VERSION=${DEPLOY_VERSION}

# -----------------------------------------------------------------------------
# AZURE CONFIGURATION [REQUIRED]
# -----------------------------------------------------------------------------
# Production Azure service principal with least-privilege access
AZURE_SUBSCRIPTION_ID=${AZURE_SUBSCRIPTION_ID}
AZURE_TENANT_ID=${AZURE_TENANT_ID}
AZURE_CLIENT_ID=${AZURE_CLIENT_ID}
AZURE_CLIENT_SECRET=${AZURE_CLIENT_SECRET}
AZURE_RESOURCE_GROUP=rg-nexus-prod

# Azure AD B2C (Production tenant)
AZURE_AD_B2C_TENANT_NAME=${AZURE_AD_B2C_TENANT_NAME}
AZURE_AD_B2C_CLIENT_ID=${AZURE_AD_B2C_CLIENT_ID}
AZURE_AD_B2C_CLIENT_SECRET=${AZURE_AD_B2C_CLIENT_SECRET}
AZURE_AD_B2C_PRIMARY_USER_FLOW=B2C_1_signupsignin

# Azure Key Vault (Primary secrets store)
# All sensitive values should reference Key Vault secrets
AZURE_KEY_VAULT_URL=https://kv-nexus-prod.vault.azure.net/

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION [REQUIRED]
# -----------------------------------------------------------------------------
# Production databases with high availability and encryption

# PostgreSQL - Azure Database for PostgreSQL (Flexible Server)
# Use connection pooling (PgBouncer) for optimal performance
DATABASE_URL=${DATABASE_URL}
DATABASE_POOL_MIN=10
DATABASE_POOL_MAX=50
DATABASE_SSL=true

# MongoDB - Azure Cosmos DB (MongoDB API) with geo-replication
MONGODB_URI=${MONGODB_URI}

# Redis - Azure Cache for Redis (Premium tier with clustering)
REDIS_URL=${REDIS_URL}
REDIS_PASSWORD=${REDIS_PASSWORD}

# -----------------------------------------------------------------------------
# AUTHENTICATION [REQUIRED]
# -----------------------------------------------------------------------------
NEXTAUTH_URL=https://nexusugc.com
# CRITICAL: Use strong, unique secret - generate with: openssl rand -base64 64
NEXTAUTH_SECRET=${NEXTAUTH_SECRET}

# OAuth Providers (Production apps)
GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}
GITHUB_CLIENT_ID=${GITHUB_CLIENT_ID}
GITHUB_CLIENT_SECRET=${GITHUB_CLIENT_SECRET}

# -----------------------------------------------------------------------------
# SOCIAL MEDIA APIS [REQUIRED]
# -----------------------------------------------------------------------------
# Production API credentials with full permissions

# TikTok for Business API
TIKTOK_CLIENT_KEY=${TIKTOK_CLIENT_KEY}
TIKTOK_CLIENT_SECRET=${TIKTOK_CLIENT_SECRET}

# Meta (Facebook/Instagram) Marketing API
META_APP_ID=${META_APP_ID}
META_APP_SECRET=${META_APP_SECRET}

# YouTube Data API v3
YOUTUBE_API_KEY=${YOUTUBE_API_KEY}
YOUTUBE_CLIENT_ID=${YOUTUBE_CLIENT_ID}
YOUTUBE_CLIENT_SECRET=${YOUTUBE_CLIENT_SECRET}

# -----------------------------------------------------------------------------
# AZURE STORAGE [REQUIRED]
# -----------------------------------------------------------------------------
# Production storage with geo-redundancy (RA-GRS)
AZURE_STORAGE_ACCOUNT_NAME=${AZURE_STORAGE_ACCOUNT_NAME}
AZURE_STORAGE_ACCOUNT_KEY=${AZURE_STORAGE_ACCOUNT_KEY}
AZURE_STORAGE_CONNECTION_STRING=${AZURE_STORAGE_CONNECTION_STRING}
AZURE_STORAGE_CONTAINER_UPLOADS=uploads
AZURE_STORAGE_CONTAINER_MEDIA=media

# -----------------------------------------------------------------------------
# AI SERVICES [REQUIRED]
# -----------------------------------------------------------------------------
# Azure OpenAI (Production deployment with rate limits)
AZURE_OPENAI_ENDPOINT=${AZURE_OPENAI_ENDPOINT}
AZURE_OPENAI_API_KEY=${AZURE_OPENAI_API_KEY}
AZURE_OPENAI_DEPLOYMENT_GPT4=gpt-4
AZURE_OPENAI_DEPLOYMENT_GPT4O=gpt-4o
AZURE_OPENAI_API_VERSION=2024-02-15-preview

# OpenAI Direct (Fallback if Azure OpenAI is unavailable)
OPENAI_API_KEY=${OPENAI_API_KEY}

# Third-party AI Services
REPLICATE_API_TOKEN=${REPLICATE_API_TOKEN}
ELEVENLABS_API_KEY=${ELEVENLABS_API_KEY}

# Azure Cognitive Services
AZURE_COGNITIVE_SERVICES_ENDPOINT=${AZURE_COGNITIVE_SERVICES_ENDPOINT}
AZURE_COGNITIVE_SERVICES_KEY=${AZURE_COGNITIVE_SERVICES_KEY}

# -----------------------------------------------------------------------------
# MESSAGE QUEUE [REQUIRED]
# -----------------------------------------------------------------------------
# Azure Service Bus (Premium tier for production)
AZURE_SERVICE_BUS_CONNECTION_STRING=${AZURE_SERVICE_BUS_CONNECTION_STRING}
AZURE_SERVICE_BUS_QUEUE_VIDEOS=video-processing
AZURE_SERVICE_BUS_QUEUE_NOTIFICATIONS=notifications

# Azure Notification Hub
AZURE_NOTIFICATION_HUB_CONNECTION_STRING=${AZURE_NOTIFICATION_HUB_CONNECTION_STRING}
AZURE_NOTIFICATION_HUB_NAME=nexus-notifications

# -----------------------------------------------------------------------------
# COMMUNICATION [REQUIRED]
# -----------------------------------------------------------------------------
# SendGrid (Production API Key with dedicated IP)
SENDGRID_API_KEY=${SENDGRID_API_KEY}
SENDGRID_FROM_EMAIL=noreply@nexusugc.com

# Twilio (Production credentials)
TWILIO_ACCOUNT_SID=${TWILIO_ACCOUNT_SID}
TWILIO_AUTH_TOKEN=${TWILIO_AUTH_TOKEN}
TWILIO_PHONE_NUMBER=${TWILIO_PHONE_NUMBER}

# Azure Communication Services
AZURE_COMMUNICATION_SERVICES_CONNECTION_STRING=${AZURE_COMMUNICATION_SERVICES_CONNECTION_STRING}
AZURE_COMMUNICATION_SERVICES_SENDER_EMAIL=noreply@nexusugc.com

# -----------------------------------------------------------------------------
# PAYMENT SERVICES [REQUIRED]
# -----------------------------------------------------------------------------
# CRITICAL: Use LIVE keys for production
# Ensure PCI DSS compliance for handling payment data

# Stripe (LIVE mode)
STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY}
STRIPE_PUBLISHABLE_KEY=${STRIPE_PUBLISHABLE_KEY}
STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET}

# Paystack (Live Mode)
PAYSTACK_SECRET_KEY=${PAYSTACK_SECRET_KEY}
PAYSTACK_PUBLIC_KEY=${PAYSTACK_PUBLIC_KEY}

# -----------------------------------------------------------------------------
# ANALYTICS [REQUIRED]
# -----------------------------------------------------------------------------
# Production analytics with full data retention
MIXPANEL_TOKEN=${MIXPANEL_TOKEN}
AMPLITUDE_API_KEY=${AMPLITUDE_API_KEY}

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
# Control feature rollout in production
FEATURE_AI_VIDEO_GENERATOR=true
FEATURE_SHOPPABLE_COMMERCE=true
FEATURE_CREATOR_MARKETPLACE=true
FEATURE_ADVANCED_ANALYTICS=true

# -----------------------------------------------------------------------------
# RATE LIMITING (Production limits)
# -----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# -----------------------------------------------------------------------------
# LOGGING (Production settings)
# -----------------------------------------------------------------------------
# Use JSON format for log aggregation (Azure Monitor, ELK, etc.)
LOG_LEVEL=warn
LOG_FORMAT=json

# -----------------------------------------------------------------------------
# DEVELOPMENT SETTINGS (MUST be disabled in production)
# -----------------------------------------------------------------------------
HOT_RELOAD=false
SKIP_EMAIL_VERIFICATION=false
MOCK_EXTERNAL_APIS=false

# -----------------------------------------------------------------------------
# MONITORING & OBSERVABILITY [REQUIRED]
# -----------------------------------------------------------------------------
# Azure Application Insights
APPLICATIONINSIGHTS_CONNECTION_STRING=${APPLICATIONINSIGHTS_CONNECTION_STRING}

# Sentry Error Tracking
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=production

# Health Check Endpoint
HEALTH_CHECK_PATH=/api/health

# -----------------------------------------------------------------------------
# SECURITY [REQUIRED]
# -----------------------------------------------------------------------------
# CORS - Only allow your domains
CORS_ALLOWED_ORIGINS=https://nexusugc.com,https://app.nexusugc.com,https://admin.nexusugc.com

# Content Security Policy
CSP_REPORT_URI=https://sentry.io/api/YOUR_PROJECT_ID/security/?sentry_key=YOUR_SENTRY_KEY

# Session Security
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_SAME_SITE=strict

# -----------------------------------------------------------------------------
# PERFORMANCE [RECOMMENDED]
# -----------------------------------------------------------------------------
# CDN Configuration
CDN_URL=https://cdn.nexusugc.com

# Cache Settings
CACHE_TTL_DEFAULT=3600
CACHE_TTL_STATIC=86400

# Worker Configuration
WORKER_CONCURRENCY=4
VIDEO_PROCESSOR_CONCURRENCY=2
NOTIFICATION_DISPATCHER_CONCURRENCY=10
SOCIAL_PUBLISHER_CONCURRENCY=4
ANALYTICS_AGGREGATOR_CONCURRENCY=5
